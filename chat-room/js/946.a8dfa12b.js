"use strict";(self["webpackChunkchatroom"]=self["webpackChunkchatroom"]||[]).push([[946],{2756:t=>{t.exports="data:audio/mpeg;base64,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niK8qFNMGvU53JXy3cjU14ItknBKnJT91sdIiZGx5dqSuMZjkHn10f/jUGTdGrYLOY9mCdQAAANIAAAAAP2w8ASd/pSy0OOS3qK7lPNjc65JKIDxXJfrXbktQ7MhtQK/01HUCgDeFroyYKEINqERR/4AhfcIOxv9scvWK0afSnt2KS1ZpbJZGlhVukrZRKxn3Gr+fd3O02Ny1lKZa8MM24aSRJhaQ3cc6SvS/G4nn3lptu+tb3qFm27hAttutyZrBa4mt+vx/l63eKxPq2pCRTZK/xCZn0iKeQmWKxPssCNGeUjBOCjDLpFCq/9vhUz0NX9spGisR7UiJ0TMFmwUu2LZ5270vFauobT8nNZPykkyGR+VqZamYEunVVto8tf9sy6SAgDRa5nTQRYb6//jQGT3G64DM39t5uSAAANIAAAAAPwNDGHSmFVNSh2/zCkj0NXbl2zDydJ5fJShWcs1r7UJRK6TsBudVlqz0q+hvUWzR2SPaO9ag0sxoskKV4js7jLDKr3rjAds6OfsMn+NeAcx5V//ruFHYXk9qqRipDxaF4ObX+msHysZr619oaz/n/E/xWJDkiRN01rKhVr3Uby4uxPrWrzDqgjNMk5EjL5xITjaZr/HpsmTUZcoCpTmwx6BDUdhL40lklvORT/lO3U2yzLci+HE0j5yCWz/41Bk1BqeCyl/aeaeAAADSAAAAAAUtacxoBf30+35mODQIBZV7Ki86AQvW/b5PdLaZ9ZbZrQU+7sQPUo52XRl9WxEoz58ejB5QNiyerlrSUpL1i99E8LQHBKPRBLhCHMSB3NEEsvHpiVimcHZgPzD2mSYhIhCQEaBAjMvQokKVoWF1G3PZXRX41PNrNyXr1e5ODWKiVEiThZEjYRuQtMolaVS1NhrNQrTxa0m4bBpJmUVrlaT5U9mUZKrJLumhVZlGK06nCbmkSqKeK0qlCbtg9lFOUlWNrUmmoratdJuxdDbOxaVtZ8GlpstIk4XWrTdGR/Iz0XRUdvdjBQwYOJVRE6VTEH/40Bk7xteCy1/YYmGAAADSAAAAABNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MQZM8CME0KEAQCMoAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/jEGTcAAAB/gAAAAAAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4xBk4AAAAf4AAAAAAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MQZOAAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/jEGTgAAABpAAAAAAAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/4xBk4AAAAaQAAAAAAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MQZOAAAAGkAAAAAAAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ=="},9946:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});var V=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"mian"}},[e("div",{staticClass:"chat-container"},[e("div",{staticClass:"messages"},t._l(t.messages,(function(s){return e("div",{key:s.id+"-"+s.timestamp,staticClass:"message",class:{"message-me":s.user===t.username}},[e("div",{staticClass:"message-header",style:{"text-align":s.user===t.username?"right":"left","margin-bottom":"4px"}},[e("strong",[t._v(t._s(s.user))])]),e("div",{staticClass:"message-content"},[t._v(t._s(s.text))]),e("div",{staticClass:"message-time"},[t._v(t._s(t.formatTime(s.timestamp)))]),e("el-avatar",{style:{position:"absolute",right:s.user===t.username?"-50px":"auto",left:s.user===t.username?"auto":"-50px",top:"50%",transform:"translateY(-50%)"},attrs:{src:s.avatar||"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}})],1)})),0),e("div",{staticClass:"input-area"},[e("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"emoji-popover"}},[e("div",{staticClass:"emoji-picker",staticStyle:{display:"flex","flex-direction":"column",width:"300px","max-height":"60vh",background:"#fff","border-radius":"8px","box-shadow":"0 2px 12px 0 rgba(0,0,0,.1)"}},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("div",{staticClass:"emoji-tabs",staticStyle:{display:"flex",padding:"8px","border-bottom":"1px solid #eee",transition:"all 0.3s ease"}},t._l(t.emojiCategories,(function(s,V){return e("div",{key:V,style:{color:t.activeCategory===V?"#07c160":"#666",padding:"4px 8px",cursor:"pointer",fontSize:"14px"},on:{click:function(e){return t.setActiveCategory(V)}}},[t._v(" "+t._s(s))])})),0)]),e("div",{staticClass:"emoji-grid",staticStyle:{flex:"1","overflow-y":"auto",padding:"8px"}},[e("div",{staticStyle:{display:"grid","grid-template-columns":"repeat(6, 1fr)",gap:"4px"}},t._l(t.list,(function(s){return e("div",{key:s,staticStyle:{padding:"6px","font-size":"24px","text-align":"center",cursor:"pointer","border-radius":"4px",transition:"all 0.2s"},on:{click:function(e){return t.addEmoji(s)},mouseenter:function(t){t.target.style.transform="scale(1.2)",t.target.style.background="#f0f7ff"},mouseleave:function(t){t.target.style.transform="scale(1)",t.target.style.background="transparent"}}},[t._v(" "+t._s(s)+" ")])})),0)])],1),e("el-button",{staticClass:"emoji-btn",staticStyle:{padding:"8px",background:"transparent",border:"none","border-radius":"4px"},attrs:{slot:"reference"},on:{mouseenter:function(t){t.target.style.background="#f0f7ff"},mouseleave:function(t){t.target.style.background="transparent"}},slot:"reference"},[e("i",{staticClass:"el-icon-star-off",staticStyle:{"font-size":"20px",color:"#409EFF"}})])],1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage,expression:"newMessage"}],attrs:{placeholder:"输入消息..."},domProps:{value:t.newMessage},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage.apply(null,arguments)},input:function(e){e.target.composing||(t.newMessage=e.target.value)}}}),e("button",{on:{click:t.sendMessage}},[e("i",{staticClass:"el-icon-position"})])],1)]),e("div",{staticClass:"drawer",class:{"drawer-open":t.showDrawer}},[e("div",{staticClass:"users-list"},[e("h3",[t._v("在线用户")]),e("div",{staticClass:"action-buttons"},[e("el-button",{attrs:{type:"danger"},on:{click:t.clearUsers}},[t._v("清空用户列表")]),e("el-button",{attrs:{type:"primary"},on:{click:t.refreshPage}},[t._v("刷新页面")])],1),e("ul",{staticClass:"user-list-container"},t._l(t.users,(function(s,V){return e("li",{key:V,staticClass:"user-item"},[e("div",{staticClass:"user-info"},[e("el-avatar",{staticClass:"user-avatar",attrs:{src:s.avatar,size:"small"}}),e("div",{staticClass:"user-details"},[e("span",{staticClass:"username"},[t._v(t._s(s.name))]),e("div",{staticClass:"user-status"},[e("el-tag",{attrs:{type:"online"===s.status?"success":"info",size:"small"}},[t._v(t._s("online"===s.status?"在线":"离线"))]),e("span",{staticClass:"last-active"},[t._v(t._s(t.formatTime(s.lastActive)))])],1)])],1)])})),0)])])])},A=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[t._m(0),e("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"用户名",prop:"username"}},[e("el-input",{staticClass:"animated-input",attrs:{placeholder:"请输入用户名"},on:{focus:t.handleInputFocus,blur:t.handleInputBlur,input:t.handleInputChange},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}},[e("i",{staticClass:"el-icon-user-solid",attrs:{slot:"prefix"},slot:"prefix"}),e("i",{staticClass:"el-icon-view",attrs:{slot:"suffix"},on:{click:t.togglePasswordVisibility},slot:"suffix"})])],1),e("el-form-item",[e("el-button",{staticClass:"login-btn",class:{"btn-animate":t.isAnimating},attrs:{type:"primary"},on:{click:t.onSubmit}},[e("i",{staticClass:"el-icon-s-promotion"}),t._v(" 登录 ")])],1)],1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-header"},[e("h2",[t._v("欢迎登录")]),e("p",[t._v("请输入您的用户名开始聊天")])])}];const r={data(){return{form:{username:""},isAnimating:!1}},methods:{handleInputChange(){const t=this.$refs.loginForm.$el.querySelector(".el-input__inner");this.form.username.trim()?(t.style.borderColor="#1e3c72",t.style.boxShadow="0 0 0 2px rgba(30, 60, 114, 0.2)"):(t.style.borderColor="#dcdfe6",t.style.boxShadow="none")},onSubmit(){this.form.username.trim()?(this.isAnimating=!0,setTimeout((()=>{this.$emit("login",this.form.username),this.isAnimating=!1}),500)):this.$message.error("请输入用户名")},handleInputFocus(){this.$refs.loginForm.$el.querySelector(".el-input__inner").style.borderColor="#1e3c72"},handleInputBlur(){this.$refs.loginForm.$el.querySelector(".el-input__inner").style.borderColor="#dcdfe6"},togglePasswordVisibility(){const t=this.$refs.loginForm.$el.querySelector(".el-input__inner");t.type="password"===t.type?"text":"password"}}},o=r;var n=s(1656),l=(0,n.A)(o,a,i,!1,null,"4b75e0f4",null);const c=l.exports,u={data(){return{showDrawer:!1,isLoggedIn:!1,username:"",users:[],messages:[],newMessage:"",socket:null,emojiCategories:["表情","人物","动物","食物","符号"],emojis:[["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😋","😎","😍","😘","😗","😙","😚","🙂","🤗","🤩"],["👋","🤚","🖐","✋","🖖","👌","🤏","✌","🤞","🤟","🤘","🤙","👈","👉","👆","👇","🖕","👍","👎","✊"],["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐨","🐯","🦁","🐮","🐷","🐸","🐵","🐔","🐧","🐦","🐤","🐣"],["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦"],["❤","🧡","💛","💚","💙","💜","🤎","🖤","🤍","💔","❣","💕","💞","💓","💗","💖","💘","💝","💟","☮"]],list:["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😋","😎","😍","😘","😗","😙","😚","🙂","🤗","🤩"],activeCategory:0,sendSound:new Audio(s(2756)),receiveSound:new Audio(s(2756))}},components:{Login:c},mounted(){this.isLoggedIn||this.connect()},methods:{setActiveCategory(t){this.activeCategory=t,this.list=this.emojis[t]},addEmoji(t){this.newMessage+=t},reconnect(){const t=5;let e=0;const s=()=>{if(e>=t)return void this.$message.error("重连失败，请检查网络连接");const s=Math.min(5e3*Math.pow(2,e),3e4);e++,setTimeout((()=>{this.connect()}),s)};s()},handleLogin(t){this.isLoggedIn=!0,this.username=t,this.connect()},generateRandomName(){const t=["快乐的","聪明的","勇敢的","可爱的","神秘的"],e=["熊猫","兔子","猫咪","狗狗","小鸟"];return t[Math.floor(Math.random()*t.length)]+e[Math.floor(Math.random()*e.length)]},connect(){const t=localStorage.getItem("userId"),e=t||Date.now();t||localStorage.setItem("userId",e),this.socket=new WebSocket("ws://10.0.0.176:8080"),this.socket.onerror=t=>{this.$message.error("WebSocket连接失败，正在尝试重新连接..."),this.reconnect()},this.socket.onclose=()=>{this.reconnect()},this.socket.onmessage=t=>{const e=JSON.parse(t.data);"message"===e.type?(this.messages.some((t=>t.id===e.payload.id))||this.messages.push(e.payload),e.payload.user!==this.username&&this.receiveSound.play()):"users"===e.type&&(this.users=e.payload.map((t=>({...t,lastActive:t.lastActive||Date.now(),status:t.status||"online"}))))},this.socket.onopen=()=>{this.socket.send(JSON.stringify({type:"join",payload:{name:this.username,id:e}}))}},sendMessage(){if(this.socket){if(this.newMessage.trim()){const t={id:Date.now(),user:this.username,text:this.newMessage,timestamp:Date.now()};this.socket.send(JSON.stringify({type:"message",payload:t})),this.newMessage="",this.sendSound.play()}}else this.$message.error("WebSocket连接未建立")},formatTime(t){if(!t)return"未知";const e=new Date(t),s=e.getHours().toString().padStart(2,"0"),V=e.getMinutes().toString().padStart(2,"0"),A=e.getSeconds().toString().padStart(2,"0");return`${s}:${V}:${A}`},checkUserStatus(t){if(!t)return!1;const e=Date.now();return e-t<3e5},clearUsers(){this.$confirm("确定要清空所有用户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.socket.send(JSON.stringify({type:"clear_users"})),this.$message({type:"success",message:"已清空用户列表"}),this.users=[]})).catch((()=>{}))},refreshPage(){window.location.reload()}}},m=u;var d=(0,n.A)(m,V,A,!1,null,"cc3b4bd4",null);const p=d.exports}}]);
//# sourceMappingURL=946.a8dfa12b.js.map